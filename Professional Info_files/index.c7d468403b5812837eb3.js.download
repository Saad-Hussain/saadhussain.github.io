!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@fiverr/i18n/singleton"),require("ua-parser-js"),require("classnames"),require("lodash"),require("react"),require("react-dom"),require("react-redux"),require("redux"),require("prop-types"),require("axios")):"function"==typeof define&&define.amd?define(["@fiverr/i18n/singleton","ua-parser-js","classnames","lodash","react","react-dom","react-redux","redux","prop-types","axios"],t):"object"==typeof exports?exports.RealtimeNotifications=t(require("@fiverr/i18n/singleton"),require("ua-parser-js"),require("classnames"),require("lodash"),require("react"),require("react-dom"),require("react-redux"),require("redux"),require("prop-types"),require("axios")):e.RealtimeNotifications=t(e.i18n,e.uaParser,e.classNames,e._,e.React16,e.ReactDOM16,e.ReactRedux,e.Redux,e.PropTypes,e.axios)}("undefined"!=typeof self?self:this,(function(e,t,n,r,o,i,a,c,u,s){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="https://npm-assets.fiverrcdn.com/assets/@fiverr-private/realtime_notifications/",n(n.s="tjUo")}({"/v4g":function(e,t,n){var r=n("92xy"),o=r.MOBILE_DEVICE,i=r.TABLET_DEVICE,a=r.IOS_OS_NAME,c=r.ANDROID_OS_NAME;e.exports={isMobile:function(e){return e===o},isTouch:function(e){return[o,i].includes(e)},isIos:function(e){return e===a},isAndroid:function(e){return e===c}}},"1KDd":function(e,t,n){e.exports={box:"_1qfPXcm","box-hidden":"_3aJnBCJ",boxHidden:"_3aJnBCJ",content:"_3ZcwtYT"}},"37AN":function(e,t,n){e.exports={}},"4u8D":function(t,n){t.exports=e},"6BTq":function(e,t,n){"use strict";(function(e){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,"a",(function(){return o}));var o="object"===("undefined"==typeof window?"undefined":r(window))&&window.window===window&&window||"object"===(void 0===e?"undefined":r(e))&&e.global===e&&e||"object"===("undefined"==typeof self?"undefined":r(self))&&self.self===self&&self}).call(this,n("yLpj"))},"8rrE":function(e,n){e.exports=t},"92xy":function(e,t){e.exports={MOBILE_DEVICE:"mobile",TABLET_DEVICE:"tablet",DESKTOP_DEVICE:"desktop",IOS_OS_NAME:"iOS",ANDROID_OS_NAME:"Android"}},CTb6:function(e,t,n){e.exports={}},DVPl:function(e,t,n){e.exports={}},K2gz:function(e,t){e.exports=n},PPEH:function(e,t,n){e.exports={}},SGQy:function(e,t,n){e.exports={}},SM5i:function(e,t,n){e.exports={}},TkJr:function(e,t,n){e.exports={popover:"_2g7EPin",content:"_1iCafnp",clickable:"_2SsU-73","inline-append":"_2dTNS5_",inlineAppend:"_2dTNS5_","popover-container":"_3QSW7Qo",popoverContainer:"_3QSW7Qo"}},VYCE:function(e,t,n){e.exports={card:"_3PktuZ4",fadeIn:"_39se80y",expired:"_2Wo-g7f"}},VgKM:function(e,t,n){var r=n("pqiq").DEFAULT_LOCALE;t.DEFAULT_CONTEXT={locale:r,userId:0,country:"",countryCode:"",pageCtxId:"",isPro:!1,abTests:{},userAgent:"",knownCrawler:!1,csrfToken:"",browserLanguage:"",currency:"",pathParameters:{},queryParameters:{},userGuid:"",url:"",ip:"",referrer:"",isMobile:!1,isTouch:!1,isIos:!1}},VmVB:function(e,t,n){e.exports={tooltip:"fJuccPM","box-content":"_1FXzw3o",boxContent:"_1FXzw3o",box:"_13vTU13"}},XLsX:function(e,t,n){e.exports={}},YLtl:function(e,t){e.exports=r},cDcd:function(e,t){e.exports=o},faye:function(e,t){e.exports=i},fhAi:function(e,t,n){e.exports={container:"lAA0Kxf"}},h74D:function(e,t){e.exports=a},lXa4:function(e,t,n){e.exports={}},pqiq:function(e,t){t.DEFAULT_LOCALE="en-US"},"r/Mn":function(e,t,n){e.exports={"item-meta":"_2wxHuz2",itemMeta:"_2wxHuz2",spacer:"_2_ogauy","sub-category":"_3e0jtja",subCategory:"_3e0jtja","icn-status":"_1hnm4nW",icnStatus:"_1hnm4nW",tooltip:"_2TUCNdN",status:"QTnW4mt"}},rKB8:function(e,t){e.exports=c},rf6O:function(e,t){e.exports=u},sXcS:function(e,t,n){e.exports={"fit-icon":"_1AB8XqH",fitIcon:"_1AB8XqH","fit-icon-clickable":"_3OLOE0g",fitIconClickable:"_3OLOE0g"}},tjUo:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"subscribe",(function(){return L}));var o={};n.r(o),n.d(o,"addItem",(function(){return cr})),n.d(o,"itemMarkRead",(function(){return ur})),n.d(o,"itemMarkUnread",(function(){return sr}));var i=n("cDcd"),a=n.n(i),c=n("faye"),u=n.n(c),s=n("4u8D"),l=n.n(s),f={INBOX_MESSAGES:"inbox_message_realtime_notification",PINNED_FLASHES:"pinned_flash_realtime_notification"};function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=Symbol(),m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this[d]=new Map}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t){var n=this[d].get(e);n||(this[d].set(e,new Set),n=this[d].get(e)),n.add(t)}},{key:"once",value:function(e,t){var n=this,r=function r(){n.off(e,r),t.apply(void 0,arguments)};this.on(e,r)}},{key:"one",value:function(e,t){this.has(e)||this.on(e,t)}},{key:"has",value:function(e){return this[d].has(e)}},{key:"off",value:function(e,t){if(this[d].has(e))if(void 0!==t){var n=this[d].get(e);n.delete(t),0===n.size&&this[d].delete(e)}else this[d].delete(e)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this[d].get(e);o&&o.forEach((function(e){e.apply(void 0,n)}))}},{key:"deferred",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Promise.resolve().then((function(){t.emit.apply(t,[e].concat(r))}))}}])&&p(t.prototype,n),r&&p(t,r),e}();function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b,v=function(e){return"object"===("undefined"==typeof Fiverr?"undefined":y(Fiverr))&&"function"==typeof Fiverr[e]||void 0},h=(b="_logErrorToServer",function(){var e;return v(b)&&(e=Fiverr)[b].apply(e,arguments)}),g=n("6BTq");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var _=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.a;return e.split(".").reduce((function(e,t){return"object"===O(e)?e[t]:e}),t)};function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var E=["get","value","set","configurable","enumerable","writable"],C=["get","value"];function S(e,t){var n=this,r=Object.getOwnPropertyDescriptor(this.constructor.prototype,e),o=E.reduce((function(o,i){switch(w(r[i])){case"undefined":break;case"function":C.includes(i)?o[i]=function(){return t("".concat(e,"$").concat(i),r[i].bind(n))}:o[i]=r[i];break;default:o[i]=r[i]}return o}),{});Object.defineProperty(this,e,o)}function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e){var t={};function n(e,n){return t[e]=e in t?t[e]:n()}for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];o.forEach((function(t){return S.call(e,t,n)}))}(this,"node","browser","development","production","testing","plike","toString")}var t,n,r;return t=e,(n=[{key:"node",get:function(){return"[object process]"===Object.prototype.toString.call(void 0!==g.a.process?g.a.process:0)}},{key:"browser",get:function(){return g.a.document&&"function"==typeof g.a.document.createElement||!this.node&&["undefined"==typeof document?"undefined":T(document),"undefined"==typeof window?"undefined":T(window)].every((function(e){return"undefined"!==e}))}},{key:"development",get:function(){return this.toString().includes("dev")}},{key:"dev",get:function(){return this.development}},{key:"production",get:function(){return this.toString().includes("prod")}},{key:"prod",get:function(){return this.production}},{key:"testing",get:function(){return this.toString().includes("test")}},{key:"test",get:function(){return this.testing}},{key:"plike",get:function(){return this.toString().includes("like")}},{key:"toString",value:function(){return((this.node?_("process.env.NODE_ENV"):_("app.environment")||function(e){if("undefined"!=typeof document){var t=document.querySelector('meta[name="'.concat(e,'"]'));return t&&t.getAttribute("content")||void 0}}("app_environment"))||"").toLowerCase()}}])&&j(t.prototype,n),r&&j(t,r),e}());function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=Symbol.for("SocketHandler"),A=Symbol.for("SocketSubscriptions");g.a[A]=g.a[A]||new m;var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;if(t){try{t=JSON.parse(t)}catch(e){h("socketHandler","incomingHandler","unable to parse event: ".concat(t))}t&&"object"===N(t)&&t.eventType&&g.a[A].emit(t.eventType,t)}},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;"string"==typeof t&&t.split(" ").forEach((function(t){return g.a[A][e](t,n)}))},x={connect:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&!g.a[k]&&P.browser?(g.a[k]=new WebSocket(e),g.a[k].addEventListener("open",(function(){g.a[k].addEventListener("message",I),x.send(t)})),g.a[k].addEventListener("close",(function n(){setTimeout((function(){x.connect(e,t)}),1500),g.a[k].removeEventListener("close",n),g.a[k].removeEventListener("message",I)})),x):x},send:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return P.browser&&1===g.a[k].readyState&&g.a[k].send(JSON.stringify(e)),x},on:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.apply(void 0,["on"].concat(t))},once:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.apply(void 0,["once"].concat(t))},off:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.apply(void 0,["off"].concat(t))}};function L(e){return function(e,t){return x.on(e,t),function(){x.off(e,t)}}([f.INBOX_MESSAGES,f.PINNED_FLASHES].join(" "),e)}var M=n("h74D"),D=n("YLtl"),B=n.n(D),q=Symbol.for("globalEventBus"),F=g.a[q]=g.a[q]||new m,U=["debug","verbose","info","warn","error","critical","silent"];var H=U.reduce((function(e,t){return Object.assign(e,(o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return F.deferred("OBS::LOGGER",{entity:e,enrichments:n,level:t})},(r=t)in(n={})?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n));var n,r,o}),{}),V=n("8rrE"),W=n.n(V),z=n("/v4g"),G=n("pqiq");function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=Symbol(),Q=function(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,enumerable:!1})},$=function(e){if(e[Z])return e;if(!function(e){return!!e&&Object(D.isObject)(e)&&!Array.isArray(e)}(e))return H.error("FiverrContext computed mixin target is not valid, please contact platform team."),e;var t=e.userAgent,n=W()(t),r=n.device.type,o=n.os.name,i={isMobile:z.isMobile(r),isTouch:z.isTouch(r),isIos:z.isIos(o),isAndroid:z.isAndroid(o)};return Q(e,Z,!0),Object.entries(i).forEach((function(t){var n=K(t,2),r=n[0],o=n[1];return Q(e,r,o)})),e},J=n("VgKM"),Y=function(){var e=B.a.get(window,"initialData.FiverrContext");return e?$(e):(H.error({message:"Browser context does not exist, please ensure the run time owner sets one on the window scope before using this API"}),J.DEFAULT_CONTEXT)},ee=n("rf6O"),te=n.n(ee);function ne(e,t){return function(e){return e.notifications}(e)[t]}function re(e){return e.toasts}function oe(e){return re(e).length>=3}function ie(e){return re(e).map((function(t){return ne(e,t)}))}function ae(e){return e.settings}function ce(e){return ae(e).realtimeEnabled}function ue(e){return e.queue}function se(e){return 0===ue(e).length}var le="QUEUE_ACTIONS_ENQUEUE",fe="QUEUE_ACTIONS_DEQUEUE",pe="QUEUE_ACTIONS_REMOVE";var de,me=function(){return function(e,t){if(se(t()))return null;var n=ue(t())[0];return e({type:fe}),n}};var ye=new Uint8Array(16);function be(){if(!de&&!(de="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return de(ye)}var ve=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var he=function(e){return"string"==typeof e&&ve.test(e)},ge=[],Oe=0;Oe<256;++Oe)ge.push((Oe+256).toString(16).substr(1));var _e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ge[e[t+0]]+ge[e[t+1]]+ge[e[t+2]]+ge[e[t+3]]+"-"+ge[e[t+4]]+ge[e[t+5]]+"-"+ge[e[t+6]]+ge[e[t+7]]+"-"+ge[e[t+8]]+ge[e[t+9]]+"-"+ge[e[t+10]]+ge[e[t+11]]+ge[e[t+12]]+ge[e[t+13]]+ge[e[t+14]]+ge[e[t+15]]).toLowerCase();if(!he(n))throw TypeError("Stringified UUID is invalid");return n};var we=function(e,t,n){var r=(e=e||{}).random||(e.rng||be)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=r[o];return t}return _e(r)},Ee=function(){new Audio("//fiverr-res.cloudinary.com/video/upload/t_fiverr_audio/kxzjjjzyhrqqo65doz60").play()};function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Se=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"hasFocus",value:function(){return document.hasFocus()}}])&&Ce(t.prototype,n),r&&Ce(t,r),e}();function Te(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function je(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Te(i,r,o,a,c,"next",e)}function c(e){Te(i,r,o,a,c,"throw",e)}a(void 0)}))}}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ne(this,"_queue",{}),Ne(this,"_queueKickedOff",{}),Ne(this,"_gotResponse",{}),Ne(this,"_callbacks",{}),Ne(this,"_handlers",[]),Ne(this,"isFocused",(function(){return n._page.hasFocus()})),Ne(this,"subscribe",(function(e){return n._handlers.push(e),function(){var t=n._handlers.indexOf(e);n._handlers.splice(t,1)}})),Ne(this,"broadcast",(function(e){n._channel&&n._channel.postMessage(e)})),Ne(this,"_shouldPlaySound",(function(){return new Promise((function(e){if(n._channel)if(n.isFocused())e(!0);else{var t=we();n._gotResponse[t]=!1,n._callbacks[t]||(n._callbacks[t]={}),n._callbacks[t].onEchoReportEnd=function(r){n._gotResponse[t]=!0,n._anotherTabIsOpen(r)?e(!1):n._currentTabShouldPlaySound(r)?e(!0):e(!1)},n._channel.postMessage({type:"__ECHO_TABS__",uid:t,callbackFnName:"onEchoReportEnd"}),setTimeout((function(){n._gotResponse[t]?e(!1):e(!0)}),600)}else e(!0)}))})),Ne(this,"_anotherTabIsOpen",(function(e){return e.some((function(e){return e.isFocused}))})),Ne(this,"_currentTabShouldPlaySound",(function(e){var t=Object(D.orderBy)(e,"createdAt","desc")[0];return n._createdAt>t.createdAt})),Ne(this,"playSound",Object(D.throttle)(je(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._shouldPlaySound();case 2:e.sent&&Ee();case 4:case"end":return e.stop()}}),e)}))),1e3,{trailing:!1})),Ne(this,"_onBroadcastMessage",(function(e){var t=e.data,r=n._tabId,o=n._createdAt,i=t.type,a=t.callbackFnName,c=t.uid;switch(i){case"__ECHO_TABS__":var u=n.isFocused();n._channel.postMessage({type:"__ECHO_TABS_RESPONSE__",uid:c,tabId:r,createdAt:o,callbackFnName:a,isFocused:u});break;case"__ECHO_TABS_RESPONSE__":n._recordInQueue({uid:c,data:t,callbackFnName:a})}n._notifySubscribers(t)})),Ne(this,"_notifySubscribers",(function(e){n._handlers.forEach((function(t){return t(e)}))})),Ne(this,"_recordInQueue",(function(e){var t=e.uid,r=e.data,o=e.callbackFnName;n._queue[t]||(n._queue[t]=[]),n._queue[t].push(r),n._queueKickedOff[t]||(n._queueKickedOff[t]=!0,setTimeout((function(){n._queueKickedOff[t]=!1,n._callbacks[t]&&n._callbacks[t][o]&&n._callbacks[t][o](n._queue[t]),n._queue[t]=[]}),500))})),P.browser&&(this._page=t,this._createdAt=Date.now(),this._tabId="".concat(we()),"BroadcastChannel"in window&&(this._channel=new BroadcastChannel("pinned_flashes::channel"),this._channel.onmessage=this._onBroadcastMessage))}var t,n,r;return t=e,r=[{key:"create",value:function(){return new e(new Se)}}],(n=null)&&Pe(t.prototype,n),r&&Pe(t,r),e}().create(),Ae=function(e){return function(){ke.broadcast(function(e){return{type:"TAB_COMMUNICATION_NOTIFICATION_CONSUMED",payload:e}}(e))}};var Ie=["count","time","gauge","set","histogram"];function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var De=Ie.reduce((function(e,t){return Object.assign(e,Re({},t,(function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=o.rate,a=o.tags;Object.entries({prefix:e,metric:n}).forEach((function(e,t){var n=Le(e,2),r=n[0],o=n[1];if("string"!=typeof o||!o)throw new TypeError("Expected argument ".concat(t," (").concat(r,") to be a string. Instead got ").concat(xe(o)," (").concat(o,")"))}));var c=[e,n].join(".");return F.deferred("OBS::STATS",{type:t,key:c,value:r,rate:i,tags:a})})))}),{});Object.defineProperty(De,"prefix",{value:function(e){return Ie.reduce((function(t,n){return Object.assign(t,Re({},n,De[n].bind(De,e)))}),{})}});var Be=De;function qe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join(".")}var Fe=qe("pinned_flashes","realtime_notifications_package");var Ue={count:function(e){Be.count(Fe,e)}};function He(e){return qe("toast",e)}var Ve={NOTIFICATION_TOAST_EMITTED:He("emitted"),NOTIFICATION_TOAST_CLICKED:He("clicked"),NOTIFICATION_TOAST_DISMISSED:He("dismissed")},We="TOASTS_ACTIONS_ADD";var ze=function(e){return function(t){t({type:"TOASTS_ACTIONS_REMOVE",payload:e}),t(function(e){return{type:"NOTIFICATIONS_ACTIONS_REMOVE",payload:e}}(e)),t(Ge())}},Ge=function(){return function(e,t){if(!oe(t())){var n=e(me());if(!Object(D.isNil)(n))e(function(e){return{type:We,payload:e}}(ne(t(),n))),e(Ae(n)),Ue.count(Ve.NOTIFICATION_TOAST_EMITTED)}}};var Ke="NOTIFICATIONS_ACTIONS_ADD";function Xe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qe=function(e){return function(t,n){var r=n();if(t(function(e){return{type:Ke,payload:e}}(e)),function(e){return ae(e).soundEnabled}(r)&&ke.playSound(),!function(e,t){return!!ne(e,t)}(r,e.id)){var o=ke.isFocused()&&!oe(r);t(function(e){return{type:le,payload:e.id}}(e)),o&&t(Ge())}}};var $e=function(e){return function(t){t(function(e){return{type:pe,payload:e}}(e))}};var Je="SETTINGS_ACTIONS_SET_SOUND_ENABLED";function Ye(e){return e.username}var et=te.a.shape({subscribe:te.a.func.isRequired}),tt=te.a.shape({id:te.a.string.isRequired,subType:te.a.string,msgParams:te.a.object}),nt=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object(D.transform)(n,(function(t,n){var r=Object(D.result)(e,n);return r&&t.push(r),!t.length}),[])[0]};function rt(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ot(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;return at(at({},e),{},ct({},t[0],nt.apply(void 0,[e].concat(rt(t)))||n))},st={admin_moved_gig:"pencil",and_co_announcement:"present",audio_file_deny:"pencil",business_accounts_team_invitation_accepted_invitee:"team",business_accounts_team_invitation_accepted_invitor:"member",business_accounts_team_invitation_created:"team",workspaces_team_invitation_accepted:"member",workspaces_team_invitation_created:"team",buyer_brief_notification_for_buyer_multi:"docs",buyer_brief_notification_for_buyer_single:"docs",buyer_brief_notification_for_buyer:"docs",buyer_profile_reminder:"form",buying_conversion_prediction_intervention_b:"bell",buying_conversion_prediction_intervention_c:"bell",buying_conversion_prediction_intervention:"bell",byob_user_notification:"present",custom:"present",delayed_private_review:"pencil",deny_user_notif:"times",featured_promotion:"ribbon",free_gig:"present",gig_handpicked:"ribbon",gig_pro_toggled_off:"docs",gig_pro_toggled_on:"docs",id_verification_document_unrecognized:"bell",id_verification_failed:"bell",id_verification_indecisive_max_tries:"bell",id_verification_indecisive_try_again:"bell",id_verification_low_quality:"bell",id_verification_passed:"bell",level_down_notification:"ribbon",level_trs_kept_notification:"ribbon",level_trs_nominated_notification:"ribbon",level_two_kept_notification:"ribbon",level_up_notification:"ribbon",new_levels_system_notification:"ribbon",new_user_notification:"docs",notify_user_on_referral_registration:"present",optional_phone_verification:"phone",pro_seller_account_created:"docs",profile_image_not_unique_deleted:"pencil",profile_image_not_unique_warning:"pencil",prompt_user_change_password:"docs",request_paused:"docs",request_unapproved:"times",seo_restructure_announcement:"pencil",shopping_balance_deposit_pending:"present",shopping_balance_deposit_share:"present",shopping_balance_deposit:"present",soft_deny_user_notif:"pencil",team_member_added:"docs",trigger_id_verification:"bell",try_live:"bell",welcome_back_from_ooo_mode:"suitcase",business_chat_added:"bell"},lt=function(e){return ut(e,["username","msg_params.seller","msg_params.user","msg_params.buyer"])},ft=function(e){return ut(e,["unreadCount","unread_count"])},pt=function(e){return ut(e,["type","msg_type"])},dt=function(e){return ut(e,["subType","sub_type"])},mt=function(e){return ut(e,["profilePicture","images.user","msg_params.images.user","msg_params.images.profile_image"])},yt=function(e){return ut(e,["msg_params.icon"],st[e.subType])},bt=function(e){return ut(e,["isRead","is_read"])},vt=function(e){return ut(e,["online","is_online"])},ht=function(e){return ut(e,["url","msg_params.full_url","msg_params.url"],"#!")},gt=function(e){return ut(e,["previewImage","images.gig"])},Ot=function(e){return ut(e,["userMessage","params.message_content","preview_text"])},_t=function(e){return"inbox"===e.type?e:ut(e,["content","params.content","msg_params.content"],"DEFAULT_VALUE")},wt=function(e){return[lt,ft,pt,dt,mt,yt,bt,vt,ht,gt,Ot,_t].reduce((function(e,t){return t(e)}),e)},Et=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.module,o=void 0===r?"":r,i=n.payload,a=void 0===i?{}:i;(t=e instanceof Error?e:"string"==typeof e?new Error(e):new Error("Something went wrong")).details={payload:a,package:"@fiverr-private/realtime_notifications",module:o},setTimeout((function(){throw t}))};function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function St(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jt(e,t){return(jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kt(e);if(t){var o=kt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nt(this,n)}}function Nt(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var At=function(e,t){return function(n){return function(r){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jt(e,t)}(s,r);var o,i,c,u=Pt(s);function s(){return St(this,s),u.apply(this,arguments)}return o=s,(i=[{key:"componentDidCatch",value:function(n){Et(n,{module:e,payload:{componentName:t}})}},{key:"render",value:function(){return a.a.createElement(n,this.props)}}])&&Tt(o.prototype,i),c&&Tt(o,c),s}(a.a.Component)}};function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bt(e);if(t){var o=Bt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mt(this,n)}}function Mt(e,t){return!t||"object"!==It(t)&&"function"!=typeof t?Dt(e):t}function Dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bt(e){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(i,e);var t,n,r,o=Lt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),qt(Dt(t=o.call(this,e)),"onRealtimeSettingsChange",(function(){t.props.realtimeEnabled?t.registerSocket():(t.socketUnsubscribe(),t.socketUnsubscribe=D.noop)})),qt(Dt(t),"handleNewNotification",(function(e){(0,t.props.handleNewNotification)(wt(e))})),qt(Dt(t),"onCurrentTabStorageChange",(function(e){var n=e.detail;t.onStorageChanges(n)})),qt(Dt(t),"registerToSettingsChanges",(function(){window.addEventListener("storage",t.onStorageChanges),document.addEventListener("realtime_notifications::sound_enabled_change",t.onCurrentTabStorageChange),document.addEventListener("realtime_notifications::realtime_enabled_change",t.onCurrentTabStorageChange)})),qt(Dt(t),"onStorageChanges",(function(e){var n=e.key,r=e.newValue,o=t.props,i=o.setSoundEnabled,a=o.setNotificationsEnabled,c="true"===r;switch(n){case"realtime_notifications::sound_enabled_change":i(c);break;case"realtime_notifications::realtime_enabled_change":a(c)}})),qt(Dt(t),"registerToTryMeDemoEvent",(function(){document.addEventListener("realtime_notifications::try_me",t.onTryMeDemoEvent)})),qt(Dt(t),"onTryMeDemoEvent",(function(){var e=function(e){return{id:"dummy",type:"notifications",sub_type:"try_live",is_read:!0,updated_at:Math.round(Date.now()/1e3),msg_params:{user:e}}}(t.props.username);t.handleNewNotification(e)})),t.socketUnsubscribe=D.noop,t.handleCrossTabCommunications=t.handleCrossTabCommunications.bind(Dt(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.onRealtimeSettingsChange(),this.registerToTryMeDemoEvent(),this.registerToSettingsChanges(),ke.subscribe(this.handleCrossTabCommunications),this.registerWindowFocus()}},{key:"componentDidUpdate",value:function(e){this.props.realtimeEnabled!==e.realtimeEnabled&&this.onRealtimeSettingsChange()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("realtime_notifications::try_me",this.onTryMeDemoEvent),window.removeEventListener("storage",this.onStorageChanges),document.removeEventListener("realtime_notifications::sound_enabled_change",this.onCurrentTabStorageChange),document.removeEventListener("realtime_notifications::realtime_enabled_change",this.onCurrentTabStorageChange),this.socketUnsubscribe()}},{key:"registerSocket",value:function(){var e=this.props.socket;this.socketUnsubscribe=e.subscribe(this.handleNewNotification)}},{key:"registerWindowFocus",value:function(){window.addEventListener("focus",this.props.handleFocus)}},{key:"handleCrossTabCommunications",value:function(e){switch(e.type){case"TAB_COMMUNICATION_NOTIFICATION_CONSUMED":var t=e.payload;this.props.markNotificationConsumed(t)}}},{key:"render",value:function(){return null}}])&&Rt(t.prototype,n),r&&Rt(t,r),i}(a.a.Component);Ft.propTypes={socket:et,username:te.a.string.isRequired,handleNewNotification:te.a.func.isRequired,handleFocus:te.a.func.isRequired,markNotificationConsumed:te.a.func.isRequired,setNotificationsEnabled:te.a.func.isRequired,setSoundEnabled:te.a.func.isRequired,realtimeEnabled:te.a.bool.isRequired};var Ut=Object(D.flow)(Object(M.connect)((function(e){return{username:Ye(e),realtimeEnabled:ce(e)}}),(function(e){return{handleNewNotification:function(t){return e(Qe(t))},handleFocus:function(){return e((function(e){var t,n=Xe(Object(D.range)(3));try{for(n.s();!(t=n.n()).done;)t.value,e(Ge())}catch(e){n.e(e)}finally{n.f()}}))},setSoundEnabled:function(t){return e({type:Je,payload:t})},setNotificationsEnabled:function(t){return e({type:"SETTINGS_ACTIONS_SET_NOTIFICATIONS_ENABLED",payload:t})},markNotificationConsumed:function(t){return e($e(t))}}})),At("realtime_notifications","Listener"))(Ft);function Ht(e){var t=document.querySelector('link[rel="shortcut icon"]');t&&t.setAttribute("href",e)}var Vt={decorate:function(){Ht("https://npm-assets.fiverrcdn.com/assets/@fiverr-private/realtime_notifications/favicon-active.fc73bac.ico")},reset:function(){Ht("https://npm-assets.fiverrcdn.com/assets/@fiverr-private/realtime_notifications/favicon.5b3b346.ico")}};function Wt(e){return e.isActive?a.a.createElement(Gt,null):a.a.createElement(zt,null)}function zt(){return Object(i.useEffect)((function(){Vt.reset()}),[]),null}function Gt(){return Object(i.useEffect)((function(){Vt.decorate()}),[]),null}Wt.propTypes={isActive:te.a.bool.isRequired};var Kt=Object(D.flow)(Object(M.connect)((function(e){return{isActive:!se(e)||!function(e){return 0===re(e).length}(e)}})),At("realtime_notifications","Favicon"))(Wt),Xt=n("rKB8");function Zt(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(o){return"function"==typeof o?o(n,r,e):t(o)}}}}var Qt=Zt();Qt.withExtraArgument=Zt;var $t=Qt;function Jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jt(Object(n),!0).forEach((function(t){en(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function en(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tn(e){return function(e){if(Array.isArray(e))return e}(e)||on(e)||rn(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e){return function(e){if(Array.isArray(e))return an(e)}(e)||on(e)||rn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(e,t){if(e){if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}function on(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){sn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(e){return function(e){if(Array.isArray(e))return fn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pn=Object(Xt.combineReducers)({notifications:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ke:var n=t.payload;return Yt(Yt({},e),{},en({},n.id,n));case"NOTIFICATIONS_ACTIONS_REMOVE":var r=t.payload,o=Yt({},e);return delete o[r.id],o;default:return e}},toasts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case We:var n=t.payload;return[].concat(ln(e),[n.id]);case"TOASTS_ACTIONS_REMOVE":var r=t.payload;return e.filter((function(e){return e!==r.id}));default:return e}},queue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return[].concat(nn(e),[t.payload]);case fe:var n=tn(e),r=n.slice(1);return r;case pe:var o=t.payload;return e.filter((function(e){return e!==o}));default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je:return un(un({},e),{},{soundEnabled:t.payload});case"SETTINGS_ACTIONS_SET_NOTIFICATIONS_ENABLED":return un(un({},e),{},{realtimeEnabled:t.payload});default:return e}},username:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e}}),dn="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Xt.compose;function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(n),!0).forEach((function(t){bn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function bn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var vn={children:ee.func.isRequired,locale:ee.string};function hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var On=function(e){var t=e.children,n=e.locale,r=void 0===n?G.DEFAULT_LOCALE:n;return t({i18n:i18n.spawn(r)})};On.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(n),!0).forEach((function(t){gn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},vn);var _n,wn=(_n=On,function(e){var t=yn(yn({},Y()),e);return a.a.createElement(_n,t)});function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=kn(e);if(t){var o=kn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nn(this,n)}}function Nn(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var An=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(i,e);var t,n,r,o=Pn(i);function i(){return Sn(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"getChildContext",value:function(){return{locale:this.props.locale}}},{key:"render",value:function(){return this.props.children}}])&&Tn(t.prototype,n),r&&Tn(t,r),i}(a.a.Component);An.childContextTypes={locale:te.a.string,children:te.a.any},An.propTypes={locale:te.a.string,children:te.a.any};var In=function(e){function t(t,n){var r=n.locale;return a.a.createElement(wn,{locale:r},(function(n){var r=n.i18n;return a.a.createElement(e,Cn({i18n:r},t))}))}return t.contextTypes={locale:te.a.string},t.displayName="I18nProviderHoc(".concat(e.displayName||e.name||"Component",")"),t},Rn=n("K2gz"),xn=n.n(Rn),Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t){return function(n){return a.a.createElement(t,e(n))}}};n("lXa4");function Mn(e){var t=e.username,n=e.imageUrl,r=e.online,o=xn()("profile-picture",{online:r});return a.a.createElement("div",{className:o,title:t},t&&a.a.createElement("div",{className:"user-initial font-accent"},t[0]),n&&a.a.createElement("div",{style:{backgroundImage:"url(".concat(n,")")},className:"user-image"}))}Mn.propTypes={username:te.a.string,imageUrl:te.a.string,online:te.a.bool},Mn.defaultProps={online:!1};var Dn=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelector("img");return n?n.getAttribute("src"):null},Bn=Object(D.flow)(Ln((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item;return{username:t.username,online:t.online,imageUrl:Dn(t.profilePicture)}})),At("realtime_notifications_shared","ProfilePicture"))(Mn);n("SM5i");function qn(e){var t=e.icon,n=e.isRead,r=xn()(["notification-icon",t],{read:n});return a.a.createElement("i",{className:r})}qn.propTypes={icon:te.a.string,isRead:te.a.bool},qn.defaultProps={icon:"bell",isRead:!1};var Fn=Ln((function(e){var t=e.item;return{isRead:t.isRead,icon:t.icon}}))(qn),Un=n("zr5I"),Hn=n.n(Un),Vn=function(e){return!0===e?"":"=".concat(encodeURIComponent(e))},Wn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t){return t+Vn(e[t])})).join("&")},zn=/\(?([^(]?):(\w+)\)?/g,Gn="[pathfinder]:",Kn=function(e,t){var n=[Gn,e].join(" ");H.error(n),"function"==typeof t&&t(n)},Xn=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.errorCallback,i=r.query,a=r.absolute;if(!e||"string"!=typeof e)return Kn("Route missing for ".concat(e),o),"/";if(0===e.indexOf("__dev__"))return Kn("Using dev only route. Make sure to replace it before going live."),"/";try{t=fiverrRoutes[e]}catch(e){return Kn("Missing global routes object",o),"/"}if(!t)return Kn("Can't find the requested route (".concat(e,"). It may be misspelled or got removed"),o),"/";var c=[];return t=t.replace(zn,(function(e,t,r){if(n){var o=n[r];if(o)return"".concat(t).concat(o)}return"("!==e[0]&&c.push(r),""})),c.length?(Kn("Required params missing for ".concat(e," route: ").concat(c.join(", ")),o),"/"):(i&&(t=[t,Wn(i)].join("?")),a?"https://www.fiverr.com"+t:t)};function Zn(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Qn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Zn(i,r,o,a,c,"next",e)}function c(e){Zn(i,r,o,a,c,"throw",e)}a(void 0)}))}}var $n,Jn="notifications_drawer_package/src/api/toggleRead/index.js",Yn={markNotificationUnread:Xn("mark_notifications_item_as_unread"),markNotificationRead:Xn("mark_notifications_item_as_read"),markConversationUnread:Xn("mark_as_unread_conversations"),markConversationRead:Xn("mark_as_read_conversations")},er=function(){var e=Qn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hn()({url:Yn.markNotificationUnread,method:"POST",data:{id:t}});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),Et(e.t0,{module:"notification_drawer",payload:{filename:Jn,url:Yn.markNotificationUnread,action:"markNotificationUnread",message:"Failed toggling item state"}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),tr=function(){var e=Qn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hn()({url:Yn.markNotificationRead,method:"POST",data:{id:t}});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),Et(e.t0,{filename:Jn,url:Yn.markNotificationRead,action:"markNotificationRead",message:"Failed toggling item state"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),nr=function(){var e=Qn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hn()({url:Yn.markConversationUnread,method:"POST",data:{id:t}});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),Et(e.t0,{filename:Jn,url:Yn.markConversationUnread,action:"markConversationUnread",message:"Failed toggling item state"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),rr=function(){var e=Qn(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Hn()({url:Yn.markConversationRead,method:"POST",data:{id:t}});case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),Et(e.t0,{filename:Jn,url:Yn.markConversationRead,action:"markConversationRead",message:"Failed toggling item state"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),or=function(e){return"notifications"===e};function ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ir($n={},"conversations","preview_conversations"),ir($n,"notifications","preview_pinned_flashes");var ar=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{type:"ACTION_TYPE_MONITOR",label:["NotificationsDrawer",e].concat(n).filter(Boolean).join(".")}},cr=function(e,t){return{source:e,item:wt(t),type:"ITEM_ADD"}},ur=function(e){var t=e.source,n=e.id;return function(e){!function(e){var t=e.source,n=e.id;(or(t)?tr:rr)(n)}({source:t,id:n}),e(ar(t,"mark_item","read")),e({source:t,id:n,type:"ITEM_MARK_READ"})}},sr=function(e){var t=e.source,n=e.id;return function(e){!function(e){var t=e.source,n=e.id;(or(t)?er:nr)(n)}({source:t,id:n}),e(ar(t,"mark_item","unread")),e({source:t,id:n,type:"ITEM_MARK_UNREAD"})}},lr=["mobile","tablet"],fr=W()().device.type,pr="mobile"===fr,dr=lr.includes(fr),mr={WILL_OPEN:"togglerWillOpen",DID_OPEN:"togglerDidOpen",WILL_CLOSE:"togglerWillClose",DID_CLOSE:"togglerDidClose"},yr="shouldPreventCloseAction";function br(e){return(br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gr(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Or(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){gr(i,r,o,a,c,"next",e)}function c(e){gr(i,r,o,a,c,"throw",e)}a(void 0)}))}}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e,t){return(wr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Er(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tr(e);if(t){var o=Tr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cr(this,n)}}function Cr(e,t){return!t||"object"!==br(t)&&"function"!=typeof t?Sr(e):t}function Sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tr(e){return(Tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pr=function(e){return"function"==typeof e},Nr=function(e){if(Pr(e)){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},kr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wr(e,t)}(i,e);var t,n,r,o=Er(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),jr(Sr(t=o.call(this,e)),"onBodyClick",(function(e){var n=t.state.isOpen,r=e.target;return n?Pr(t.shouldPreventCloseAction)&&!0===t.shouldPreventCloseAction(e)||t.shouldPreventPropagationByClassName(r)||t.shouldPreventPropagationByElement(r)?null:void t.close(e):null})),jr(Sr(t),"notPropagatingElements",new Set),jr(Sr(t),"open",function(){var e=Or(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.persist&&n.persist(),!((r=Nr(t[mr.WILL_OPEN],n))instanceof Promise)){e.next=5;break}return e.next=5,r;case 5:t.setState({isOpen:!0},(function(){t.bindClickListener(),Nr(t[mr.DID_OPEN],n)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),jr(Sr(t),"close",function(){var e=Or(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&n.persist&&n.persist(),!((r=Nr(t[mr.WILL_CLOSE],n))instanceof Promise)){e.next=5;break}return e.next=5,r;case 5:t.setState({isOpen:!1},(function(){t.removeClickListener(),Nr(t[mr.DID_CLOSE],n)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),jr(Sr(t),"toggle",function(){var e=Or(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state.isOpen,o=r?t.close:t.open,e.next=4,o(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),jr(Sr(t),"bindClickListener",(function(){!1!==t.props.bindBodyClickListener&&document.body.addEventListener("click",t.onBodyClick)})),jr(Sr(t),"removeClickListener",(function(){return document.body.removeEventListener("click",t.onBodyClick)})),jr(Sr(t),"shouldPreventPropagationByClassName",(function(e){return!(!e||!e.classList)&&e.classList.contains("ui-toggle-prevent-close")})),jr(Sr(t),"shouldPreventPropagationByElement",(function(e){if(!e)return!1;if(!e.contains)return!1;if(!t.notPropagatingElements.size)return!1;if(t.notPropagatingElements.has(e))return!0;var n,r=vr(t.notPropagatingElements);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.contains&&o.contains(e))return!0}}catch(e){r.e(e)}finally{r.f()}return!1})),jr(Sr(t),"preventCloseAction",(function(e){if(e)return t.notPropagatingElements.has(e)?null:void t.notPropagatingElements.add(e)})),t.state={isOpen:e.defaultOpen||!1},[mr.WILL_OPEN,mr.DID_OPEN,mr.WILL_CLOSE,mr.DID_CLOSE,yr].forEach((function(n){Pr(t[n])?t[n]=t[n].bind(Sr(t)):Pr(e[n])&&(t[n]=e[n].bind(Sr(t)))}),Sr(t)),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.state.isOpen&&this.bindClickListener()}},{key:"componentWillUnmount",value:function(){this.removeClickListener()}},{key:"render",value:function(){var e=this.props.children;if(!["undefined","function"].includes(br(e)))throw new TypeError("Toggler: `children` must be a function");var t=this.close,n=this.open,r=this.toggle,o=this.preventCloseAction,i=this.state.isOpen,a=this.toggleContent?this.toggleContent.bind(this):e;return a?a({isOpen:i,close:t,open:n,toggle:r,preventCloseAction:o}):null}}])&&_r(t.prototype,n),r&&_r(t,r),i}(i.Component);kr.propTypes={children:ee.node,bindBodyClickListener:ee.bool,defaultOpen:ee.bool},kr.defaultProps={defaultOpen:!1},Object.assign(kr,{PREVENT_CLOSE_CLASS:"ui-toggle-prevent-close"});var Ar=kr;function Ir(e){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Rr,xr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,o=Object.assign({},t,r?r.props:{},n);return a.a.isValidElement(r)?a.a.cloneElement(r,o):("function"==typeof e&&(r=e(o)),["undefined","boolean"].includes(Ir(r))?null:r)};function Lr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mr=function(e,t){return Object.keys(Dr).map((function(e){return"".concat(t,".").concat(e)})).join(", ")},Dr={LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",LEFT_TOP:"left-top",LEFT_BOTTOM:"left-bottom",RIGHT_TOP:"right-top",RIGHT_BOTTOM:"right-bottom",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},Br=(Lr(Rr={},"left","right"),Lr(Rr,"right","left"),Lr(Rr,"top","bottom"),Lr(Rr,"bottom","top"),Rr),qr={CLICK:"click",HOVER:"hover"},Fr="Position passed is not a valid position. Valid positions include: ".concat(Mr(0,"POSITIONS")),Ur="Trigger passed is not a valid trigger. Valid triggers include: ".concat(Mr(0,"TRIGGERS")),Hr={attributes:["class"],childList:!0,subtree:!0,characterData:!0},Vr=function(e){var t=e.position,n=e.boxDimensions,r=e.anchorDimensions,o=window,i=o.innerWidth,a=o.innerHeight;switch(t){case Dr.LEFT:return r.left-n.width<0;case Dr.RIGHT:return r.right+n.width>i;case Dr.TOP:return r.top-n.height<0;case Dr.BOTTOM:return r.bottom+n.height>a;default:return!1}},Wr=n("1KDd"),zr=n.n(Wr);function Gr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gr(Object(n),!0).forEach((function(t){Xr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $r=function(e){var t=e.position,n=e.box,r=e.anchor,o=e.allowOverflow,i=e.fullWidth,a=e.boxFitContent,c=e.appendToBody;if(!n||!r)return{};var u,s=r.getBoundingClientRect();u=c?s:{top:r.offsetTop,bottom:r.offsetTop+s.height,left:r.offsetLeft,right:r.offsetLeft+s.width,width:s.width,height:s.height};var l,f,p=n.getBoundingClientRect(),d=u,m=d.top,y=d.bottom,b=d.left,v=d.right,h=d.width,g=d.height,O=p.width,_=p.height,w=m+g/2-_/2,E=b+h/2-O/2,C=Zr(t.split("-"),2),S=C[0],T=C[1];!o&&Vr({boxDimensions:p,anchorDimensions:s,position:S})&&(S=Br[S]);var j=function(e){return Object(D.camelCase)(["padding",Object(D.capitalize)(Br[e])].join(""))}(S),P=function(e){var t=e.position,n=e.anchorDimensions,r=e.boxDimensions;switch(t){case Dr.LEFT:return n.left-r.width;case Dr.RIGHT:return n.left+n.width;case Dr.TOP:return n.top-r.height;case Dr.BOTTOM:return n.bottom}}({anchorDimensions:u,boxDimensions:p,position:S});switch(S){case Dr.LEFT:case Dr.RIGHT:f=w,l=P;break;case Dr.TOP:case Dr.BOTTOM:f=P,l=E}switch(T){case Dr.LEFT:l=b;break;case Dr.RIGHT:l=v-O;break;case Dr.TOP:f=m;break;case Dr.BOTTOM:f=y-_}i&&(l=8);var N="".concat(c?window.scrollX+l:l,"px"),k="".concat(c?window.scrollY+f:f,"px");return{style:Kr(Kr(Kr({},i&&{width:"".concat(window.innerWidth-16,"px")}),a&&{minWidth:"".concat(u.width,"px")}),{},Xr({left:N,top:k},j,"".concat(8,"px"))),position:[S,T].filter(Boolean).join("-")}},Jr=function(e){var t=e.children,n=e.position,r=e.container,o=e.anchor,u=e.className,s=e.contentClassName,l=e.allowOverflow,f=void 0!==l&&l,p=e.fullWidth,d=void 0!==p&&p,m=e.boxFitContent,y=void 0===m||m,b=e.isOpen,v=void 0!==b&&b,h=e.style,g=void 0===h?{}:h,O=e.onMouseLeave,_=void 0===O?D.noop:O,w=e.onMouseEnter,E=void 0===w?D.noop:w,C=e.preventCloseAction,S=void 0===C?D.noop:C,T=e.appendToBody,j=void 0===T||T,P=e.trigger,N=void 0===P?qr.CLICK:P,k=Zr(Object(i.useState)(null),2),A=k[0],I=k[1],R=Zr(Object(i.useState)(n),2),x=R[0],L=R[1],M=xn()(zr.a.box,Xr({},zr.a.boxHidden,!v),u),B=xn()(zr.a.content,s);if(Object(i.useEffect)((function(){if(A){var e=function(){if(v){var e=$r({position:n,anchor:o,box:A,allowOverflow:f,fullWidth:d,boxFitContent:y,appendToBody:j});L(e.position),Object.assign(A.style,e.style)}},t=new MutationObserver(e);t.observe(A,Hr),v&&e();var r=function e(t){return t?t.scrollHeight>t.clientHeight?t:e(t.parentNode):null}(o);return r&&r.addEventListener("scroll",e),window.addEventListener("resize",e),j&&N===qr.HOVER&&window.addEventListener("scroll",e),function(){t.disconnect(),r&&r.removeEventListener("scroll",e),window.removeEventListener("resize",e),j&&N===qr.HOVER&&window.removeEventListener("scroll",e)}}}),[A,o,n,f,d,v]),!Object.values(Dr).includes(n))throw new Error(Fr);return r&&t?Object(c.createPortal)(a.a.createElement("aside",{className:M,"data-position":x,ref:function(e){S(e),I(e)},style:g,onMouseLeave:_,onMouseEnter:E},a.a.createElement("div",{className:B},xr(t))),r):null};Jr.propTypes={children:te.a.node.isRequired,position:te.a.oneOf(Object.values(Dr)).isRequired,container:te.a.object,isOpen:te.a.bool,style:te.a.object,anchor:te.a.object,className:te.a.string,contentClassName:te.a.string,allowOverflow:te.a.bool,fullWidth:te.a.bool,boxFitContent:te.a.bool,preventCloseAction:te.a.func,onMouseLeave:te.a.func,onMouseEnter:te.a.func,appendToBody:te.a.bool,trigger:te.a.oneOf(Object.values(qr))};var Yr=Jr,eo=n("TkJr"),to=n.n(eo);function no(e){return(no="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ro=["trigger","children"];function oo(){return(oo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function io(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function ao(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){io(i,r,o,a,c,"next",e)}function c(e){io(i,r,o,a,c,"throw",e)}a(void 0)}))}}function co(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function uo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function so(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lo(e,t){return(lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=yo(e);if(t){var o=yo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return po(this,n)}}function po(e,t){return!t||"object"!==no(t)&&"function"!=typeof t?mo(e):t}function mo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ho=function(e){return"function"==typeof e},go=function(e){return pr&&function(e){var t=bo(e.split("-"),1)[0];return[Dr.LEFT,Dr.RIGHT].includes(t)}(e)?Dr.TOP:e},Oo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lo(e,t)}(u,e);var t,n,r,o,i,c=fo(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).state=t.state||{},Object.assign(t.state,{container:null}),t.mouseLeaveTimeout=null,t.cancelMouseLeave=t.cancelMouseLeave.bind(mo(t)),t.setContentRef=t.setContentRef.bind(mo(t)),t}return t=u,(n=[{key:"componentWillUnmount",value:function(){var e=this.state.container,t=this.props.appendToBody;e&&(t?document.body.removeChild(e):this.anchorElement.parentNode.removeChild(e))}},{key:"popoverProps",get:function(){var e=this.open,t=this.close,n=this.toggle,r=this.preventCloseAction,o=this.state.isOpen,i=this.props,a=(i.trigger,i.children,uo(i,ro));return Object.assign({open:e,close:t,toggle:n,preventCloseAction:r,isOpen:o},a)}},{key:"eventHandlers",get:function(){var e=this,t=this.props.trigger,n=this.state.isOpen;switch(t){case qr.CLICK:return{onClick:this.toggle};case qr.HOVER:return{onMouseEnter:function(){e.cancelMouseLeave(),!n&&e.open.apply(e,arguments)},onMouseLeave:function(){e.mouseLeaveTimeout=setTimeout(e.close,50)}};default:throw new Error(Ur)}}},{key:"wrapperClasses",get:function(){var e=this.props,t=e.trigger,n=e.className,r=e.openClassName,o=e.appendToBody,i=this.state.isOpen;return xn()(to.a.popover,co({},to.a.clickable,t===qr.CLICK),co({},to.a.inlineAppend,!o),n,co({},r,r&&i))}},{key:"containerClasses",get:function(){var e=this.props,t=e.containerClassName,n=e.className;return xn()(t,n,to.a.popoverContainer)}},{key:"generateContainer",value:function(){if(!this.state.container){var e=this.props.appendToBody,t=document.createElement("div");t.className=this.containerClasses,e?document.body.appendChild(t):this.anchorElement.parentNode.appendChild(t),this.setState({container:t})}}},{key:"cancelMouseLeave",value:function(){clearTimeout(this.mouseLeaveTimeout)}},{key:"setContentRef",value:function(e){var t=this.state.isOpen,n=this.props.contentRef;this.anchorElement=e,t&&this.generateContainer(),n(e)}},{key:"togglerWillOpen",value:(i=ao(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.willOpen,this.generateContainer(),!ho(n)){e.next=5;break}return e.next=5,n(t);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"togglerDidOpen",value:function(e){var t=this.props.onOpen;ho(t)&&t(e)}},{key:"togglerWillClose",value:(o=ao(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.willClose,!ho(n)){e.next=4;break}return e.next=4,n(t);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"togglerDidClose",value:function(e){var t=this.props.onClose;ho(t)&&t(e)}},{key:"render",value:function(){var e=this.eventHandlers,t=this.props,n=t.children,r=t.contentClassName,o=t.content,i=t.style,c=t.position,u=t.allowOverflow,s=t.fullWidth,l=t.boxFitContent,f=t.boxClassName,p=t.boxContentClassName,d=t.appendToBody,m=t.trigger,y=this.state,b=y.isOpen,v=y.container,h=xn()(to.a.content,r),g=go(c);return a.a.createElement("div",{className:this.wrapperClasses,ref:this.preventCloseAction},a.a.createElement("span",oo({className:h,ref:this.setContentRef},e),xr(n,this.popoverProps)),a.a.createElement(Yr,{isOpen:b,className:f,contentClassName:p,style:i,container:v,anchor:this.anchorElement,position:g,allowOverflow:u,fullWidth:pr&&s,boxFitContent:l,onMouseEnter:this.cancelMouseLeave,onMouseLeave:e.onMouseLeave,preventCloseAction:this.preventCloseAction,appendToBody:d,trigger:m},xr(o,this.popoverProps)))}}])&&so(t.prototype,n),r&&so(t,r),u}(Ar);Oo.propTypes={children:ee.node.isRequired,content:ee.node.isRequired,position:Object(ee.oneOf)(Object.values(Dr)),allowOverflow:ee.bool,trigger:Object(ee.oneOf)(Object.values(qr)),contentRef:ee.func,className:ee.string,contentClassName:ee.string,openClassName:ee.string,containerClassName:ee.string,boxClassName:ee.string,boxContentClassName:ee.string,style:ee.object,fullWidth:ee.bool,boxFitContent:ee.bool,willOpen:ee.func,willClose:ee.func,onOpen:ee.func,onClose:ee.func,defaultOpen:ee.bool,appendToBody:ee.bool},Oo.defaultProps={position:Dr.TOP,allowOverflow:!1,fullWidth:!1,boxFitContent:!0,trigger:qr.CLICK,style:{},contentRef:D.noop,defaultOpen:!1,appendToBody:!0},Object.assign(Oo,{POSITIONS:Dr,TRIGGERS:qr});var _o=Oo,wo=n("VmVB"),Eo=n.n(wo),Co=["className","boxClassName","boxContentClassName","content","delay"];function So(){return(So=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function To(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var jo=_o.POSITIONS,Po=_o.TRIGGERS,No=function(e){var t=e.className,n=e.boxClassName,r=e.boxContentClassName,o=e.content,i=e.delay,c=To(e,Co),u=xn()(Eo.a.tooltip,t),s=xn()(Eo.a.box,n),l=xn()(Eo.a.boxContent,r),f=dr?Po.CLICK:Po.HOVER;return a.a.createElement(_o,So({className:u,key:i.toString(),willOpen:function(e){return new Promise((function(t){if(i&&e.target){var n=e.target,r=setTimeout(t,1e3);n.addEventListener("mouseleave",(function e(){clearTimeout(r),n.removeEventListener("mouseleave",e)}),{once:!0})}else t()}))},content:o,fullWidth:pr,boxFitContent:!1,trigger:f,position:jo.TOP,boxClassName:s,boxContentClassName:l},c))};No.propTypes={delay:te.a.bool},No.defaultProps={delay:!1},Object.assign(No.propTypes,_o.propTypes),Object.assign(No,{POSITIONS:jo});var ko=No;n("CTb6");function Ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ro(e){var t=e.isRead,n=e.toggleRead,r=e.i18n,o=xn()("toggle-read",{read:t}),i=r.t("realtime_notifications.notifications_drawer.mark_".concat(t?"unread":"read"));return a.a.createElement(ko,{content:i,position:ko.POSITIONS.LEFT,containerClassName:"toggle-read-tooltip-container"},a.a.createElement("button",{className:o,onClick:function(e){e.preventDefault(),e.stopPropagation(),n()}}))}Ro.propTypes={isRead:te.a.bool,toggleRead:te.a.func,i18n:te.a.shape({t:te.a.func})};var xo=Object(Xt.compose)(In,Ln((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(n),!0).forEach((function(t){Io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})))(Ro),Lo=function(e){var t=e.condition,n=e.children;return t?n:null};Lo.propTypes={condition:te.a.bool.isRequired,children:te.a.node.isRequired};var Mo=Lo,Do=function(e){return"notifications"===e.type?"notifications":"conversations"};n("PPEH");function Bo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(n),!0).forEach((function(t){Fo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uo(e){var t=e.unreadCount,n=e.isRead,r=e.toggleRead,o=xn()("unread-container",{read:n});return a.a.createElement("span",{className:o},a.a.createElement(Mo,{condition:t>1},a.a.createElement("span",{className:"unread-count"},t)),a.a.createElement(xo,{isRead:n,toggleRead:r}))}Uo.propTypes={unreadCount:te.a.string,toggleRead:te.a.func,isRead:te.a.bool},Uo.defaultProps={unreadCount:null,isRead:!1};var Ho=Object(Xt.compose)(Object(M.connect)((function(e,t){var n=t.item;return{source:Do(n),id:n.id}}),o,(function(e,t,n){var r=t.itemMarkRead,o=t.itemMarkUnread,i=n.item;return qo(qo(qo({},e),i),{},{toggleRead:function(){return i.isRead?o(e):r(e)}})})),Ln((function(e){var t,n=e.unreadCount;return{toggleRead:e.toggleRead,isRead:e.isRead,unreadCount:(t=n,t&&Number.isInteger(t)?t>99?"99+":"".concat(t):null)}})))(Uo),Vo=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o={count:Math.floor(r)};return t&&(o.$scope=t),l.a.t("".concat(e).concat(n),o)};function Wo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.prefix,r=void 0===n?"general.how_long_ago.":n,o=t.locale,i=Date.now(),a=i-e;return Number.isNaN(a)?"":a<6e4&&Vo(r,o,"just_now")||a<36e5&&Vo(r,o,"minutes_ago",a/6e4)||a<864e5&&Vo(r,o,"hours_ago",a/36e5)||a<6048e5&&Vo(r,o,"days_ago",a/864e5)||a<2592e6&&Vo(r,o,"weeks_ago",a/6048e5)||a<31536e6&&Vo(r,o,"months_ago",a/2592e6)||Vo(r,o,"years_ago",a/31536e6)}Object.assign(Wo,{MINUTE_IN_MS:6e4,HOUR_IN_MS:36e5,DAY_IN_MS:864e5,WEEK_IN_MS:6048e5,MONTH_IN_MS:2592e6,YEAR_IN_MS:31536e6});var zo=n("sXcS"),Go=n.n(zo);var Ko=function(e){var t,n,r,o=e.onClick,i=e.className,c=e.color,u=e.children,s=e.size,l="function"==typeof o,f=l?"button":"span",p={className:xn()(Go.a.fitIcon,(t={},n=Go.a.fitIconClickable,r=l,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t),i),style:function(e){var t=e.size,n=e.color;return{width:"".concat(t,"px"),height:"".concat(t,"px"),fill:n}}({size:s,color:c})};return l&&Object.assign(p,{onClick:o}),a.a.createElement(f,p,xr(u))};Ko.propTypes={children:Object(ee.oneOfType)([ee.node,ee.func]).isRequired,onClick:ee.func,color:ee.string,size:ee.number,className:ee.string},Ko.defaultProps={size:16};var Xo=Ko,Zo=function(){return a.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z"}))},Qo=function(){return a.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M8 0.25C3.71875 0.25 0.25 3.71875 0.25 8C0.25 12.2812 3.71875 15.75 8 15.75C12.2812 15.75 15.75 12.2812 15.75 8C15.75 3.71875 12.2812 0.25 8 0.25ZM11.8 10.0344C11.9469 10.1813 11.9469 10.4187 11.8 10.5656L10.5625 11.8C10.4156 11.9469 10.1781 11.9469 10.0312 11.8L8 9.75L5.96562 11.8C5.81875 11.9469 5.58125 11.9469 5.43437 11.8L4.2 10.5625C4.05312 10.4156 4.05312 10.1781 4.2 10.0312L6.25 8L4.2 5.96562C4.05312 5.81875 4.05312 5.58125 4.2 5.43437L5.4375 4.19688C5.58437 4.05 5.82188 4.05 5.96875 4.19688L8 6.25L10.0344 4.2C10.1813 4.05312 10.4187 4.05312 10.5656 4.2L11.8031 5.4375C11.95 5.58437 11.95 5.82188 11.8031 5.96875L9.75 8L11.8 10.0344Z"}))},$o=function(){return a.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM8 12V9H4V7H8V4L12 8L8 12Z"}))},Jo=function(){return a.a.createElement("svg",{width:"14",height:"12",viewBox:"0 0 14 12",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{clipPath:"url(#clip0)"},a.a.createElement("path",{d:"M13.3478 10.3128C13.7804 11.0627 13.2373 12 12.3733 12H1.12597C0.260256 12 -0.280259 11.0612 0.151506 10.3128L5.77524 0.562141C6.20806 -0.18807 7.29212 -0.186711 7.72416 0.562141L13.3478 10.3128V10.3128ZM6.7497 8.29687C6.15427 8.29687 5.67158 8.77956 5.67158 9.37499C5.67158 9.97042 6.15427 10.4531 6.7497 10.4531C7.34513 10.4531 7.82783 9.97042 7.82783 9.37499C7.82783 8.77956 7.34513 8.29687 6.7497 8.29687ZM5.72612 4.42157L5.89997 7.60907C5.90811 7.75822 6.03144 7.87499 6.1808 7.87499H7.3186C7.46797 7.87499 7.5913 7.75822 7.59943 7.60907L7.77329 4.42157C7.78208 4.26046 7.6538 4.12499 7.49246 4.12499H6.00692C5.84558 4.12499 5.71733 4.26046 5.72612 4.42157V4.42157Z"})),a.a.createElement("defs",null,a.a.createElement("clipPath",{id:"clip0"},a.a.createElement("rect",{width:"13.5",height:"12"}))))},Yo=function(){return a.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",null,a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 1.54839C4.43687 1.54839 1.54839 4.43687 1.54839 8C1.54839 11.5631 4.43687 14.4516 8 14.4516C11.5631 14.4516 14.4516 11.5631 14.4516 8C14.4516 4.43687 11.5631 1.54839 8 1.54839ZM0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z"}),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 11C9.65685 11 11 9.65685 11 8C11 6.34315 9.65685 5 8 5C6.34315 5 5 6.34315 5 8C5 9.65685 6.34315 11 8 11Z"})))},ei=function(){return a.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M15.75 8C15.75 12.2802 12.2802 15.75 8 15.75C3.71978 15.75 0.25 12.2802 0.25 8C0.25 3.71978 3.71978 0.25 8 0.25C12.2802 0.25 15.75 3.71978 15.75 8ZM7.10356 12.1036L12.8536 6.35356C13.0488 6.15831 13.0488 5.84172 12.8536 5.64647L12.1465 4.93937C11.9512 4.74409 11.6346 4.74409 11.4393 4.93937L6.75 9.62869L4.56066 7.43934C4.36541 7.24409 4.04881 7.24409 3.85353 7.43934L3.14644 8.14644C2.95119 8.34169 2.95119 8.65828 3.14644 8.85353L6.39644 12.1035C6.59172 12.2988 6.90828 12.2988 7.10356 12.1036Z"}))},ti=function(){return a.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M8 0C6.41775 0 4.87103 0.469192 3.55544 1.34824C2.23985 2.22729 1.21447 3.47672 0.608967 4.93853C0.00346631 6.40034 -0.15496 8.00887 0.153721 9.56072C0.462403 11.1126 1.22433 12.538 2.34315 13.6569C3.46197 14.7757 4.88743 15.5376 6.43928 15.8463C7.99113 16.155 9.59966 15.9965 11.0615 15.391C12.5233 14.7855 13.7727 13.7602 14.6518 12.4446C15.5308 11.129 16 9.58225 16 8C15.9977 5.87897 15.1541 3.84547 13.6543 2.34568C12.1545 0.845885 10.121 0.00229405 8 0ZM8 2C9.2449 2.00005 10.4585 2.38984 11.4707 3.11467L3.11467 11.4707C2.47494 10.5743 2.09468 9.51886 2.01567 8.42043C1.93667 7.32199 2.16198 6.22303 2.66684 5.2443C3.17171 4.26558 3.93659 3.44495 4.87745 2.8726C5.81831 2.30025 6.89873 1.99833 8 2ZM8 14C6.75511 13.9999 5.54146 13.6102 4.52934 12.8853L12.8853 4.52933C13.5251 5.42574 13.9053 6.48114 13.9843 7.57957C14.0633 8.67801 13.838 9.77697 13.3332 10.7557C12.8283 11.7344 12.0634 12.555 11.1226 13.1274C10.1817 13.6997 9.10127 14.0017 8 14Z"}))},ni=function(){return a.a.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",null,a.a.createElement("path",{d:"M13.152 1.5h.12a.37.37 0 0 0 .364-.375v-.75A.37.37 0 0 0 13.273 0H2.363A.37.37 0 0 0 2 .375v.75a.37.37 0 0 0 .364.375h.12c0 2.518.976 5.181 2.946 6.5-1.979 1.324-2.945 3.997-2.945 6.5h-.121a.37.37 0 0 0-.364.375v.75a.37.37 0 0 0 .364.375h10.909a.37.37 0 0 0 .363-.375v-.75a.37.37 0 0 0-.363-.375h-.121c0-2.518-.976-5.181-2.945-6.5 1.978-1.324 2.944-3.997 2.944-6.5zm-1.455 0a8.09 8.09 0 0 1-.385 2.5H4.324a8.09 8.09 0 0 1-.385-2.5h7.758zM11.312 12H4.324c.628-1.923 1.956-3.25 3.494-3.25 1.538 0 2.867 1.327 3.494 3.25z"})))},ri=n("r/Mn"),oi=n.n(ri);function ii(e,t){var n=e.dateTime,r=e.subCategory,o=e.status,i=Wo(n,{prefix:"realtime_notifications.notifications_drawer.long_ago.",locale:t.locale});return a.a.createElement("footer",{className:oi.a.itemMeta},n&&a.a.createElement(a.a.Fragment,null,a.a.createElement("time",{dateTime:n},i),a.a.createElement(ai,null)),r&&a.a.createElement(a.a.Fragment,null,a.a.createElement("span",{className:oi.a.subCategory},r),a.a.createElement(ai,null)),o&&a.a.createElement(ko,{content:o,containerClassName:oi.a.tooltip,boxContentClassName:oi.a.status,position:ko.POSITIONS.LEFT},a.a.createElement(Xo,{size:10,className:oi.a.icnStatus},function(e){switch(e){case"rejected":return Qo;case"delivered":return $o;case"late":return Jo;case"new":return Yo;case"completed":return ei;case"cancelled":return ti;case"in-progress":return ni;default:return null}}(o))))}function ai(){return a.a.createElement(Xo,{size:2,className:oi.a.spacer},Zo)}var ci=function(e){return Object(D.result)(e,"msg_params.sub_category")},ui=function(e){return Object(D.result)(e,"msg_params.order_status")};ii.propTypes={dateTime:te.a.number,subCategory:te.a.string,status:te.a.string},ii.contextTypes={locale:te.a.string};var si=Ln((function(e){var t=e.item;return{dateTime:1e3*(t.updated_at||0),subCategory:ci(t),status:ui(t)}}))(ii);n("37AN");function li(e){var t=e.unsafeString,n=e.content,r=e.username,o=e.subType,i=e.msgParams,c=e.i18n;return t?a.a.createElement("p",{className:"content"},a.a.createElement("strong",{className:"username"},r),t):n?"DEFAULT_VALUE"===n?a.a.createElement("p",{className:"content",dangerouslySetInnerHTML:{__html:c.t("realtime_notifications.types.".concat(o),i)}}):a.a.createElement("p",{className:"content",dangerouslySetInnerHTML:{__html:n}}):null}li.propTypes={content:te.a.string,unsafeString:te.a.string,username:te.a.string,subType:te.a.string,msgParams:te.a.object,i18n:te.a.shape({t:te.a.func})};var fi=Object(Xt.compose)(In,Ln((function(e){var t=e.item,n=e.i18n;return{unsafeString:t.userMessage,content:t.content,username:t.username,subType:t.subType,msgParams:t.msg_params,i18n:n}})))(li);n("SGQy");function pi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item;if(!t||!t.previewImage)return null;var n=t.previewImage;return a.a.createElement("div",{className:"preview-image",style:{backgroundImage:"url(".concat(n,")")}})}pi.propTypes={item:te.a.object};var di=pi;n("XLsX");function mi(){return a.a.createElement("svg",{width:"8",height:"8",viewBox:"0 0 11 10",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M7.21548 5L10.5817 1.63375C10.7764 1.43906 10.7764 1.12313 10.5817 0.928127L9.79954 0.145939C9.60485 -0.0487482 9.28891 -0.0487482 9.09391 0.145939L5.72798 3.5125L2.36173 0.146252C2.16704 -0.0484356 1.8511 -0.0484356 1.6561 0.146252L0.874226 0.928127C0.679539 1.12281 0.679539 1.43875 0.874226 1.63375L4.24048 5L0.874226 8.36625C0.679539 8.56094 0.679539 8.87687 0.874226 9.07187L1.65641 9.85406C1.8511 10.0487 2.16704 10.0487 2.36204 9.85406L5.72798 6.4875L9.09423 9.85375C9.28891 10.0484 9.60485 10.0484 9.79985 9.85375L10.582 9.07156C10.7767 8.87688 10.7767 8.56094 10.582 8.36594L7.21548 5Z"}))}function yi(e){var t=e.item,n=e.className,r=e.isToast,o=e.dismissable,i=void 0!==o&&o,c=e.onDismiss,u=void 0===c?D.noop:c,s=e.onClick,l=void 0===s?D.noop:s,f=xn()("drawer-item",n,{toast:r,read:!r&&t.isRead});return a.a.createElement("li",{"data-testid":t.id,className:f,onClick:function(e){l(e,t)}},a.a.createElement("a",{href:t.url,className:"main-action"},a.a.createElement("div",{className:"image-wrapper"},t.profilePicture&&a.a.createElement(Bn,{item:t}),!t.profilePicture&&a.a.createElement(Fn,{item:t})),a.a.createElement("div",{className:"item-content-wrapper"},a.a.createElement(fi,{item:t}),!r&&a.a.createElement(si,{item:t})),a.a.createElement("div",{className:"item-gutter"},!r&&a.a.createElement("div",{className:"controls"},a.a.createElement(Ho,{item:t})),a.a.createElement("div",{className:"preview-image-wrapper"},a.a.createElement(di,{item:t})))),i&&a.a.createElement(bi,{onClick:u}))}function bi(e){var t=e.onClick;return a.a.createElement("button",{"data-testid":"dismiss",className:"dismiss",onClick:t},a.a.createElement(mi,null))}yi.propTypes={className:te.a.string,item:te.a.object,isToast:te.a.bool,dismissable:te.a.bool,onDismiss:te.a.func,onClick:te.a.func},bi.propTypes={onClick:te.a.func.isRequired};var vi=At("realtime_notifications_shared","ListItem")(yi),hi=n("VYCE"),gi=n.n(hi);function Oi(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function _i(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Oi(i,r,o,a,c,"next",e)}function c(e){Oi(i,r,o,a,c,"throw",e)}a(void 0)}))}}function wi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ei(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ei(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ci="INITIAL",Si="STARTED",Ti="COMPLETED";function ji(e){var t,n,r,o=e.notification,c=e.onExpiration,u=function(e){var t=e.startAfter,n=wi(Object(i.useState)(Ci),2),r=n[0],o=n[1],a=Object(i.useRef)(),c=Object(i.useRef)(),u=Object(i.useCallback)((function(){o(Si),c.current=setTimeout(_i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o(Ti);case 1:case"end":return e.stop()}}),e)}))),1e3)}),[]),s=Object(i.useCallback)((function(){a.current=setTimeout(_i(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u();case 1:case"end":return e.stop()}}),e)}))),t)}),[]),l=Object(i.useCallback)((function(){a.current&&clearTimeout(a.current),c.current&&clearTimeout(c.current)}),[]),f=Object(i.useCallback)((function(){l(),u()}),[l,u]);return Object(i.useEffect)((function(){return s(),l}),[s,l]),{animationState:r,startAnimating:f}}({startAfter:e.duration-1e3}),s=u.animationState,l=u.startAnimating,f=s===Si||s===Ti,p=xn()(gi.a.card,(t={},n=gi.a.expired,r=f,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t));return Object(i.useEffect)((function(){s===Ti&&c()}),[s,c]),a.a.createElement(vi,{item:o,className:p,isToast:!0,onClick:Pi,dismissable:!0,onDismiss:function(e){e.stopPropagation(),l(),Ue.count(Ve.NOTIFICATION_TOAST_DISMISSED)}})}function Pi(){Ue.count(Ve.NOTIFICATION_TOAST_CLICKED)}ji.propTypes={notification:tt.isRequired,onExpiration:te.a.func.isRequired,duration:te.a.number.isRequired};At("realtime_notifications","NotificationToast")(ji);var Ni=n("fhAi"),ki=n.n(Ni);function Ai(e){var t=e.notifications,n=e.onToastExpiration,r=xn()("realtime-notifications",ki.a.container);return t.length?a.a.createElement("ul",{className:r},t.map((function(e){return a.a.createElement(ji,{key:e.id,notification:e,duration:1e4,onExpiration:function(){return n(e)}})}))):null}Ai.propTypes={notifications:te.a.arrayOf(tt),onToastExpiration:te.a.func.isRequired};var Ii=Object(D.flow)(Object(M.connect)((function(e){return{notifications:ie(e)}}),(function(e){return{onToastExpiration:function(t){return e(ze(t))}}})),At("realtime_notifications","Toaster"))(Ai);function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Li(e,t){return(Li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bi(e);if(t){var o=Bi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Di(this,n)}}function Di(e,t){return!t||"object"!==Ri(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bi(e){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Li(e,t)}(i,e);var t,n,r,o=Mi(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).store=function(e){return Object(Xt.createStore)(pn,function(e){return{settings:{realtimeEnabled:e.realtimeEnabled,soundEnabled:e.soundEnabled},username:e.username}}(e),dn(Object(Xt.applyMiddleware)($t)))}(e),t}return t=i,(n=[{key:"render",value:function(){var e=this.props.socket,t=Y().locale;return a.a.createElement(M.Provider,{store:this.store},a.a.createElement(An,{locale:t},a.a.createElement(a.a.Fragment,null,a.a.createElement(Ut,{socket:e}),a.a.createElement(Ii,null),a.a.createElement(Kt,null))))}}])&&xi(t.prototype,n),r&&xi(t,r),i}(a.a.Component);qi.propTypes={socket:et};var Fi=At("realtime_notifications","Entry")(qi);n("DVPl");function Ui(){return(Ui=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Hi=function(e){return a.a.createElement(Fi,Ui({},e,{socket:r}))},Vi="undefined"!=typeof document&&document.getElementById("RealtimeNotifications-component");if(Vi){var Wi=window.initialData.RealtimeNotifications;u.a.render(a.a.createElement(Hi,Wi),Vi)}t.default=Hi},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},zr5I:function(e,t){e.exports=s}})}));